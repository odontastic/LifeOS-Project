{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/austin/Documents/LifeOS/01-Projects/Development/app/components/ChatInterface.tsx"],"sourcesContent":["// ChatInterface.tsx\n// Component for the Marriage EQ OS chat interface.\n// Dependencies: React, Tailwind CSS\n// This component handles message display, input, module selection, and local storage.\n\nimport React, { useState, useEffect } from 'react';\n\nconst modulePrompts = {\n  'Base': \"You are my Personal Life OS with a specialized focus on emotional intelligence, marriage health, and Catholic virtue development...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Morning Kickstart': \"MORNING KICKSTART MODE ACTIVATED\\n\\nYour job: Help me start the day with clarity, presence, and wife-focused awareness...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Crisis Support': \"CRISIS MODE ACTIVATED\\n\\nYou've indicated: Wife is upset / I messed up / Conflict happening...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Risk Audit': \"WEEKLY RISK AUDIT (Through Her Lens)\\n\\nThis is a *security assessment* from your wife's perspective...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Pattern Spotter': \"WEEKLY PATTERN ANALYSIS\\n\\nAnswer these questions honestly. I'll help you see what you're missing...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Mini Journal': \"EVENING CHECK-IN (3 minutes)\\n\\nQuick daily capture...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n};\n\nconst ChatInterface = () => {\n  const [messages, setMessages] = useState<string[]>([]);\n  const [currentModule, setCurrentModule] = useState('Base');\n  const [newMessage, setNewMessage] = useState('');\n\n  useEffect(() => {\n    // Load chat history from local storage\n    const storedMessages = localStorage.getItem('chatMessages');\n    if (storedMessages) {\n      setMessages(JSON.parse(storedMessages));\n    }\n\n    // Load selected module from local storage\n    const storedModule = localStorage.getItem('selectedModule');\n    if (storedModule) {\n      setCurrentModule(storedModule);\n    }\n\n    // Add system message based on selected module\n    const systemMessage = modulePrompts[currentModule] || 'Base Prompt';\n    setMessages([...messages, `System: ${systemMessage}`]);\n\n  }, [currentModule, messages]);\n\n  const handleModuleChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const selectedModule = event.target.value;\n    setCurrentModule(selectedModule);\n    localStorage.setItem('selectedModule', selectedModule);\n\n    // Add system message when module changes\n    const systemMessage = modulePrompts[selectedModule] || 'Base Prompt';\n    setMessages([...messages, `System: ${systemMessage}`]);\n  };\n\n  const handleSendMessage = async () => {\n    if (newMessage.trim() !== '') {\n      setMessages([...messages, `User: ${newMessage}`]);\n      setNewMessage('');\n\n      try {\n        const response = await fetch('https://api.anthropic.com/v1/messages', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${process.env.CLAUDE_API_KEY}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            model: 'claude-3-opus-20240229',\n            max_tokens: 200,\n            messages: [{ 'role': 'user', 'content': newMessage }]\n          }),\n        });\n\n        const data = await response.json();\n        const aiResponse = data.choices[0].message.content;\n        setMessages([...messages, `User: ${newMessage}`, `AI: ${aiResponse}`]);\n        // Simplified SPR Compression: Extract key insights and recommendations\n        const sprSummary = `Key Insights: ${messages.slice(-5).map(msg => msg.split(':')[1]).join(', ')}\\nRecommendations: Based on recent conversation, consider...`;\n        localStorage.setItem('chatMessages', JSON.stringify({ summary: sprSummary, fullMessages: [...messages, `User: ${newMessage}`, `AI: ${aiResponse}`] }));\n\n      } catch (error) {\n        console.error('Error calling Claude API:', error);\n        setMessages([...messages, `User: ${newMessage}`, `AI: Error generating response`]);\n        localStorage.setItem('chatMessages', JSON.stringify([...messages, `User: ${newMessage}`, `AI: Error generating response`]));\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-800 text-white\">\n      {/* Module Selection */}\n      <div className=\"p-4\">\n        <label htmlFor=\"moduleSelect\" className=\"block text-sm font-medium text-gray-300\">Select Module:</label>\n        <select\n          id=\"moduleSelect\"\n          value={currentModule}\n          onChange={handleModuleChange}\n          className=\"mt-2 block w-full rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:w-64\"\n        >\n          {Object.keys(modulePrompts).map((module) => (\n            <option key={module} value={module}>{module}</option>\n          ))}\n        </select>\n      </div>\n\n      {/* Chat Messages */}\n      <div className=\"flex-1 p-4 overflow-y-auto\">\n        {messages.map((message, index) => (\n          <div key={index} className=\"mb-2\">\n            {message}\n          </div>\n        ))}\n      </div>\n\n      {/* Input Field and Send Button */}\n      <div className=\"p-4\">\n        <input\n          type=\"text\"\n          value={newMessage}\n          onChange={(e) => setNewMessage(e.target.value)}\n          className=\"flex-1 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 w-full mr-2\"\n          placeholder=\"Type your message...\"\n        />\n        <button\n          onClick={handleSendMessage}\n          className=\"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md\"\n        >\n          Send\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///home/austin/Documents/LifeOS/01-Projects/Development/app/chat/page.tsx"],"sourcesContent":["// app/chat/page.tsx\n'use client';\n\nimport React from 'react';\nimport ChatInterface from '../components/ChatInterface';\n\nexport default function ChatPage() {\n  return (\n    <div>\n      <h1>Chat</h1>\n      <ChatInterface />\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;AAIpB;AAHA;;;AAKe,SAAS;IACtB,qBACE,sSAAC;;0BACC,sSAAC;0BAAG;;;;;;0BACJ,sSAAC,sMAAa;;;;;;;;;;;AAGpB"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///home/austin/Documents/LifeOS/01-Projects/Development/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,qKACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}