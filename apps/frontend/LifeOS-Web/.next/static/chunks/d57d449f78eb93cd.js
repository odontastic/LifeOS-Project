(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92237,e=>{"use strict";var t=e.i(26942),r=e.i(40169);let s={Base:"You are my Personal Life OS with a specialized focus on emotional intelligence, marriage health, and Catholic virtue development...\n\n(See marriage_EQ_OS_2025-11-14.md for full prompt)","Morning Kickstart":"MORNING KICKSTART MODE ACTIVATED\n\nYour job: Help me start the day with clarity, presence, and wife-focused awareness...\n\n(See marriage_EQ_OS_2025-11-14.md for full prompt)","Crisis Support":"CRISIS MODE ACTIVATED\n\nYou've indicated: Wife is upset / I messed up / Conflict happening...\n\n(See marriage_EQ_OS_2025-11-14.md for full prompt)","Risk Audit":"WEEKLY RISK AUDIT (Through Her Lens)\n\nThis is a *security assessment* from your wife's perspective...\n\n(See marriage_EQ_OS_2025-11-14.md for full prompt)","Pattern Spotter":"WEEKLY PATTERN ANALYSIS\n\nAnswer these questions honestly. I'll help you see what you're missing...\n\n(See marriage_EQ_OS_2025-11-14.md for full prompt)","Mini Journal":"EVENING CHECK-IN (3 minutes)\n\nQuick daily capture...\n\n(See marriage_EQ_OS_2025-11-14.md for full prompt)"},a=()=>{let[e,a]=(0,r.useState)([]),[o,l]=(0,r.useState)("Base"),[i,n]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("chatMessages");if(e)try{let t=JSON.parse(e);Array.isArray(t)&&a(t)}catch(e){console.error("Failed to parse chat messages from local storage:",e),localStorage.removeItem("chatMessages")}let t=localStorage.getItem("selectedModule");t&&s[t]&&l(t)},[]),(0,r.useEffect)(()=>{localStorage.setItem("chatMessages",JSON.stringify(e))},[e]);let c=async()=>{if(""===i.trim())return;let e=`User: ${i}`;a(t=>[...t,e]),n("");try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i,module:o})});if(!e.ok)throw Error(`API error: ${e.statusText}`);let t=await e.json(),r=`AI: ${t.reply}`;a(e=>[...e,r])}catch(e){console.error("Error sending message:",e),a(e=>[...e,"AI: Sorry, I encountered an error. Please try again."])}};return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-gray-800 text-white",children:[(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("label",{htmlFor:"moduleSelect",className:"block text-sm font-medium text-gray-300",children:"Select Module:"}),(0,t.jsx)("select",{id:"moduleSelect",value:o,onChange:e=>{let t=e.target.value;l(t),localStorage.setItem("selectedModule",t);let r=`System: Switched to ${t} module.`;a(e=>[...e,r])},className:"mt-2 block w-full rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:w-64",children:Object.keys(s).map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:e.map((e,r)=>(0,t.jsx)("div",{className:"mb-2",children:e},r))}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),className:"flex-1 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 w-full mr-2",placeholder:"Type your message..."}),(0,t.jsx)("button",{onClick:c,className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md",children:"Send"})]})]})};function o(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Chat"}),(0,t.jsx)(a,{})]})}e.s(["default",()=>o],92237)}]);