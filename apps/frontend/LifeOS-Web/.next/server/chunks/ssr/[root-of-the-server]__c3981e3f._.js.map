{"version":3,"sources":["../../../../../../../../../Applications/LifeOS-Project/apps/frontend/LifeOS-Web/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../../../../Applications/LifeOS-Project/apps/frontend/LifeOS-Web/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../../../Applications/LifeOS-Project/apps/frontend/LifeOS-Web/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../../../../Applications/LifeOS-Project/apps/frontend/LifeOS-Web/app/components/ChatInterface.tsx","../../../../../../../../../Applications/LifeOS-Project/apps/frontend/LifeOS-Web/app/chat/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","// ChatInterface.tsx\n// Component for the LifeOS Web Interface chat interface.\n// Dependencies: React, Tailwind CSS\n// This component handles message display, input, module selection, and local storage.\n\nimport React, { useState, useEffect } from 'react';\n\nconst modulePrompts = {\n  'Base': \"You are my Personal Life OS with a specialized focus on emotional intelligence, marriage health, and Catholic virtue development...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Morning Kickstart': \"MORNING KICKSTART MODE ACTIVATED\\n\\nYour job: Help me start the day with clarity, presence, and wife-focused awareness...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Crisis Support': \"CRISIS MODE ACTIVATED\\n\\nYou've indicated: Wife is upset / I messed up / Conflict happening...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Risk Audit': \"WEEKLY RISK AUDIT (Through Her Lens)\\n\\nThis is a *security assessment* from your wife's perspective...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Pattern Spotter': \"WEEKLY PATTERN ANALYSIS\\n\\nAnswer these questions honestly. I'll help you see what you're missing...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n  'Mini Journal': \"EVENING CHECK-IN (3 minutes)\\n\\nQuick daily capture...\\n\\n(See marriage_EQ_OS_2025-11-14.md for full prompt)\",\n};\n\nconst ChatInterface = () => {\n  const [messages, setMessages] = useState<string[]>([]);\n  const [currentModule, setCurrentModule] = useState('Base');\n  const [newMessage, setNewMessage] = useState('');\n\n  // Effect for initializing state from local storage, runs only once\n  useEffect(() => {\n    const storedMessages = localStorage.getItem('chatMessages');\n    if (storedMessages) {\n      // Safely parse the stored JSON\n      try {\n        const parsedMessages = JSON.parse(storedMessages);\n        if (Array.isArray(parsedMessages)) {\n          setMessages(parsedMessages);\n        }\n      } catch (error) {\n        console.error(\"Failed to parse chat messages from local storage:\", error);\n        localStorage.removeItem('chatMessages'); // Clear corrupted data\n      }\n    }\n\n    const storedModule = localStorage.getItem('selectedModule');\n    if (storedModule && modulePrompts[storedModule]) {\n      setCurrentModule(storedModule);\n    }\n  }, []); // Empty dependency array ensures this runs only once on mount\n\n  // Effect for updating local storage when messages change\n  useEffect(() => {\n    localStorage.setItem('chatMessages', JSON.stringify(messages));\n  }, [messages]);\n\n  const handleModuleChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const selectedModule = event.target.value;\n    setCurrentModule(selectedModule);\n    localStorage.setItem('selectedModule', selectedModule);\n\n    // Add a system message to indicate the module has changed\n    const systemMessage = `System: Switched to ${selectedModule} module.`;\n    setMessages(prevMessages => [...prevMessages, systemMessage]);\n  };\n\n  const handleSendMessage = async () => {\n    if (newMessage.trim() === '') return;\n\n    const userMessage = `User: ${newMessage}`;\n    // Optimistically update the UI with the user's message\n    setMessages(prevMessages => [...prevMessages, userMessage]);\n    setNewMessage('');\n\n    try {\n      // Securely call the backend API route\n      const response = await fetch('/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: newMessage,\n          module: currentModule, // Optionally pass the current module for context\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`API error: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      const aiResponse = `AI: ${data.reply}`;\n      // Update the UI with the AI's response\n      setMessages(prevMessages => [...prevMessages, aiResponse]);\n\n    } catch (error) {\n      console.error('Error sending message:', error);\n      const errorMessage = 'AI: Sorry, I encountered an error. Please try again.';\n      // Update the UI with an error message\n      setMessages(prevMessages => [...prevMessages, errorMessage]);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-800 text-white\">\n      {/* Module Selection */}\n      <div className=\"p-4\">\n        <label htmlFor=\"moduleSelect\" className=\"block text-sm font-medium text-gray-300\">Select Module:</label>\n        <select\n          id=\"moduleSelect\"\n          value={currentModule}\n          onChange={handleModuleChange}\n          className=\"mt-2 block w-full rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:w-64\"\n        >\n          {Object.keys(modulePrompts).map((module) => (\n            <option key={module} value={module}>{module}</option>\n          ))}\n        </select>\n      </div>\n\n      {/* Chat Messages */}\n      <div className=\"flex-1 p-4 overflow-y-auto\">\n        {messages.map((message, index) => (\n          <div key={index} className=\"mb-2\">\n            {message}\n          </div>\n        ))}\n      </div>\n\n      {/* Input Field and Send Button */}\n      <div className=\"p-4\">\n        <input\n          type=\"text\"\n          value={newMessage}\n          onChange={(e) => setNewMessage(e.target.value)}\n          className=\"flex-1 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 w-full mr-2\"\n          placeholder=\"Type your message...\"\n        />\n        <button\n          onClick={handleSendMessage}\n          className=\"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md\"\n        >\n          Send\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;","// app/chat/page.tsx\n'use client';\n\nimport React from 'react';\nimport ChatInterface from '../components/ChatInterface';\n\nexport default function ChatPage() {\n  return (\n    <div>\n      <h1>Chat</h1>\n      <ChatInterface />\n    </div>\n  );\n}"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}